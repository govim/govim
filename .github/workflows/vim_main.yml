# Code generated by genconfig. DO NOT EDIT.
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - '**'
  schedule:
    - cron: '0 9 * * *'

# actions/upload-artifact does not os.ExpandEnv the value passed
# to it as a path. Hence we have to hard code a directory that
# exists outside of the code checkout directory, and set ARTEFACTS
# accordingly below.
#
# Tracking https://github.com/actions/upload-artifact/issues/8

env:
  GO111MODULE: "on"
  GOPROXY: "https://proxy.golang.org"
  ARTEFACTS: "/home/runner/.artefacts"
  CI: "true"
  DOCKER_HUB_USER: "govimci"
  DOCKER_HUB_TOKEN: ${{ secrets.DOCKER_HUB_TOKEN }}
  GH_USER: "x-access-token"
  GH_TOKEN: ${{ github.token }}
  GOVIM_TEST_RACE_SLOWDOWN: "1.5"
  GOVIM_ERRLOGMATCH_WAIT: "25s"

name: Vim Main Test
jobs:
  test:
    strategy:
      fail-fast: false
      matrix:
        os: [ubuntu-24.04]
        go-version: ["1.23.3"]
    runs-on: ${{ matrix.os }}
    env:
      VIM_FLAVOR: vim
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - uses: actions/setup-go@v5
      with:
        stable: 'false'
        go-version: ${{ matrix.go-version }}
    - name: Run main tests
      run: ./_scripts/testVimMain.sh v9.1.0889 ${{ github.event_name }}

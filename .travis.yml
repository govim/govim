# Code generated by genconfig. DO NOT EDIT.
language: generic
sudo: required

notifications:
  email:
    recipients:
      - govim-dev+ci@googlegroups.com
    on_success: never
    on_failure: always

branches:
  only:
    - master

os:
  - linux

env:
  global:
    - GO111MODULE=on
    - GOPROXY=https://proxy.golang.org
    - ARTEFACTS=$HOME/artefacts
  matrix:
    - GO_VERSION="go1.12.14" VIM_FLAVOR="vim" VIM_VERSION="v8.1.1711" VIM_COMMAND="vim"
    - GO_VERSION="go1.13.5" VIM_FLAVOR="vim" VIM_VERSION="v8.1.1711" VIM_COMMAND="vim"
    - GO_VERSION="go1.14beta1" VIM_FLAVOR="vim" VIM_VERSION="v8.1.1711" VIM_COMMAND="vim"
    - GO_VERSION="go1.12.14" VIM_FLAVOR="gvim" VIM_VERSION="v8.1.1711" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.13.5" VIM_FLAVOR="gvim" VIM_VERSION="v8.1.1711" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.14beta1" VIM_FLAVOR="gvim" VIM_VERSION="v8.1.1711" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.12.14" VIM_FLAVOR="vim" VIM_VERSION="v8.1.2056" VIM_COMMAND="vim"
    - GO_VERSION="go1.13.5" VIM_FLAVOR="vim" VIM_VERSION="v8.1.2056" VIM_COMMAND="vim"
    - GO_VERSION="go1.14beta1" VIM_FLAVOR="vim" VIM_VERSION="v8.1.2056" VIM_COMMAND="vim"
    - GO_VERSION="go1.12.14" VIM_FLAVOR="gvim" VIM_VERSION="v8.1.2056" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.13.5" VIM_FLAVOR="gvim" VIM_VERSION="v8.1.2056" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.14beta1" VIM_FLAVOR="gvim" VIM_VERSION="v8.1.2056" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.12.14" VIM_FLAVOR="vim" VIM_VERSION="v8.2.0025" VIM_COMMAND="vim"
    - GO_VERSION="go1.13.5" VIM_FLAVOR="vim" VIM_VERSION="v8.2.0025" VIM_COMMAND="vim"
    - GO_VERSION="go1.14beta1" VIM_FLAVOR="vim" VIM_VERSION="v8.2.0025" VIM_COMMAND="vim"
    - GO_VERSION="go1.12.14" VIM_FLAVOR="gvim" VIM_VERSION="v8.2.0025" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.13.5" VIM_FLAVOR="gvim" VIM_VERSION="v8.2.0025" VIM_COMMAND="xvfb-run -a gvim -f"
    - GO_VERSION="go1.14beta1" VIM_FLAVOR="gvim" VIM_VERSION="v8.2.0025" VIM_COMMAND="xvfb-run -a gvim -f"

# Add this before_install until we have a definitive resolution on
# https://travis-ci.community/t/files-in-checkout-have-eol-changed-from-lf-to-crlf/349/2
before_install:
  - cd ../..
  - mv $TRAVIS_REPO_SLUG _old
  - git config --global core.autocrlf false
  - git clone --depth=50 _old $TRAVIS_REPO_SLUG
  - cd $TRAVIS_REPO_SLUG
  - docker --version
  - ./_scripts/buildGovimImage.sh

script:
  - ./_scripts/runDockerRun.sh

after_failure:
  - ./_scripts/afterFailure.sh
